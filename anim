-- FE-Animation-editor dengan GUI Rapi + Minimize dan Hotkey K
-- Siap dipakai!

pcall(function()
if not game.Players.LocalPlayer.Character or game.Players.LocalPlayer.Character:WaitForChild("Humanoid").RigType ~= Enum.HumanoidRigType.R15 then 
    game.StarterGui:SetCore("SendNotification", {Title = "R6", Text = "You're on R6, bro. Change to R15!", Duration = 60})
    return
end

local st = os.clock()
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local camera = workspace.CurrentCamera

cloneref = cloneref or function(o) return o end
local GazeGoGui = cloneref(game:GetService("CoreGui")) or game:GetService("CoreGui") or game.Players.LocalPlayer:WaitForChild("PlayerGui")

local guiName = "GazeVerificator"
if GazeGoGui:FindFirstChild(guiName) then
    game.StarterGui:SetCore("SendNotification", {Title = "Error", Text = "Script Already Executed", Duration = 3})
    return
end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = guiName
screenGui.Parent = cloneref(game.CoreGui)

local function getScaledSize(w, h)
    local vs = camera.ViewportSize
    return UDim2.new(0, math.floor(vs.X*w), 0, math.floor(vs.Y*h))
end

local frame = Instance.new("Frame")
frame.Name = "GazeBro"
frame.Size = getScaledSize(0.32, 0.42)
frame.Position = UDim2.new(0.5,-getScaledSize(0.32,0.42).X.Offset/2,0.5,-getScaledSize(0.32,0.42).Y.Offset/2)
frame.BackgroundColor3 = Color3.fromRGB(51,57,75)
frame.BackgroundTransparency = 0
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local title = Instance.new("TextLabel")
title.Text = "FE Animation Editor"
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.new(1,1,1)
title.BackgroundTransparency = 1
title.Size = UDim2.new(1,0,0.13,0)
title.Position = UDim2.new(0,0,0,0)
title.TextScaled = true
title.Parent = frame

local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Text = "_"
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextScaled = true
minimizeBtn.BackgroundTransparency = 0.5
minimizeBtn.BackgroundColor3 = Color3.fromRGB(80,80,80)
minimizeBtn.TextColor3 = Color3.new(1,1,1)
minimizeBtn.Size = UDim2.new(0,36,0,28)
minimizeBtn.Position = UDim2.new(1,-38,0,5)
minimizeBtn.Parent = frame

local searchBar = Instance.new("TextBox")
searchBar.PlaceholderText = "Cari animasi..."
searchBar.Text = ""
searchBar.Font = Enum.Font.Gotham
searchBar.BackgroundColor3 = Color3.fromRGB(38,43,56)
searchBar.TextColor3 = Color3.new(1,1,1)
searchBar.Size = UDim2.new(0.92,0,0.12,0)
searchBar.Position = UDim2.new(0.04,0,0.14,0)
searchBar.ClearTextOnFocus = true
searchBar.BorderSizePixel = 0
searchBar.Parent = frame

local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.BackgroundColor3 = Color3.fromRGB(49,54,66)
scrollFrame.ScrollBarThickness = 0
scrollFrame.Size = UDim2.new(0.92,0,0.68,0)
scrollFrame.Position = UDim2.new(0.04,0,0.28,0)
scrollFrame.BorderSizePixel = 0
scrollFrame.Parent = frame

local animBtns = {}
local function createAnimBtn(text,callback)
    local btn = Instance.new("TextButton")
    btn.Text = text
    btn.Font = Enum.Font.GothamBold
    btn.TextColor3 = Color3.new(1,1,1)
    btn.BackgroundColor3 = Color3.fromRGB(71,78,98)
    btn.Size = UDim2.new(1,0,0,34)
    btn.Position = UDim2.new(0,0,0,#animBtns*36)
    btn.BorderSizePixel = 0
    btn.Parent = scrollFrame
    btn.MouseButton1Click:Connect(function()
        callback()
    end)
    table.insert(animBtns,btn)
    scrollFrame.CanvasSize = UDim2.new(0,0,0,#animBtns*36)
end

-- Sample Data
createAnimBtn("Idle - Astronaut", function() end)
createAnimBtn("Run - Bubbly", function() end)
createAnimBtn("Jump - Catwalk", function() end)
createAnimBtn("Walk - Robot", function() end)

searchBar:GetPropertyChangedSignal("Text"):Connect(function()
    local search = searchBar.Text:lower()
    local idx = 0
    for _,btn in ipairs(animBtns) do
        if search == "" or btn.Text:lower():find(search) then
            btn.Visible = true
            btn.Position = UDim2.new(0,0,0,idx*36)
            idx = idx + 1
        else
            btn.Visible = false
        end
    end
    scrollFrame.CanvasSize = UDim2.new(0,0,0,idx*36)
end)

local managerFrame = Instance.new("Frame")
managerFrame.Name = "AnimManager"
managerFrame.Size = getScaledSize(0.32, 0.42)
managerFrame.Position = UDim2.new(0.5,getScaledSize(0.32,0.42).X.Offset/2+16,0.5,-getScaledSize(0.32,0.42).Y.Offset/2)
managerFrame.BackgroundColor3 = Color3.fromRGB(58,69,88)
managerFrame.BorderSizePixel = 0
managerFrame.Parent = screenGui

local managerTitle = Instance.new("TextLabel")
managerTitle.Text = "Animation Manager"
managerTitle.Font = Enum.Font.GothamBold
managerTitle.TextColor3 = Color3.fromRGB(255,255,255)
managerTitle.BackgroundTransparency = 1
managerTitle.Size = UDim2.new(1,0,0.13,0)
managerTitle.Position = UDim2.new(0,0,0,0)
managerTitle.TextScaled = true
managerTitle.Parent = managerFrame

local hotKey = Enum.KeyCode.K
local guiVisible = true
local function setVisible(val)
    frame.Visible = val
    managerFrame.Visible = val
    guiVisible = val
end
minimizeBtn.MouseButton1Click:Connect(function()
    setVisible(false)
end)
UserInputService.InputBegan:Connect(function(input, gp)
    if not gp and input.KeyCode == hotKey then
        setVisible(not guiVisible)
    end
end)

end)
